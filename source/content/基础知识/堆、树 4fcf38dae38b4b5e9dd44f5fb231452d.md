# 堆、树

Owner: yancy yu

## 树的类型

AVL树、红黑树、B树（B-树）、B+树

### **AVL树：**用平衡因子差值决定并通过旋转来实现，左右子树树高差不超过1

### **红黑树：**

1.根节点和叶子结点必须为黑色;

2.叶子节点不存储数据;

3.如果节点上红色，子节点必黑色（反之不然）;

4.根节点到叶子节点的每条路径，必须包含相同数目的黑色节点（相同的黑色高度）;

### **B树（B-树）：**

是一种多路搜索树（并不是二叉的）：

1.定义任意非叶子结点最多只有M个儿子；且M>2；

2.根结点的儿子数为[2, M]；

3.除根结点以外的非叶子结点的儿子数为[M/2, M]；

4.每个结点存放至少M/2-1（取上整）和至多M-1个关键字；（至少2个关键字）

5.非叶子结点的关键字个数=指向儿子的指针个数-1；

6.非叶子结点的关键字：K[1], K[2], …, K[M-1]；且K[i] < K[i+1]；

.非叶子结点的指针：P[1], P[2], …, P[M]；其中P[1]指向关键字小于K[1]的子树，P[M]指向关键字大于K[M-1]的子树，其它P[i]指向关键字属于(K[i-1], K[i])的子树；

8.所有叶子结点位于同一层

### **B+树：**

B+树是B-树的变体，也是一种多路搜索树，其定义基本与B-树同，除了：

1.非叶子结点的子树指针与关键字个数相同；

2.非叶子结点的子树指针P[i]，指向关键字值属于[K[i], K[i+1])的子树（B-树是开区间）；

3.**为所有叶子结点增加一个链指针（方便区间查询）**

4.所有关键字都在叶子结点出现；

## 堆和树的区别

1. **数据结构**：
    - **堆** 是一种特殊的完全二叉树，满足堆的性质（大根堆或小根堆）。
    - **树** 是一种更一般的数据结构，可以有多种形式，如二叉树、平衡二叉树、红黑树、B树等。
2. **性质**：
    - **堆** 的主要性质是父节点与子节点之间的大小关系。在大根堆中，父节点的值大于或等于子节点的值；在小根堆中，父节点的值小于或等于子节点的值。
    - **树** 可以有多种性质。例如，二叉搜索树（BST）要求左子树的所有节点小于根节点，右子树的所有节点大于根节点。
3. **操作复杂度**：
    - **堆** 的插入和删除最大（或最小）元素操作通常是 O(log n)。
    - **树** 的操作复杂度取决于其类型。例如，红黑树的插入、删除和查找操作都是 O(log n)。

## 应用场景

### 堆：

1. **优先队列**：例如，任务调度。
2. **堆排序**：使用堆结构可以实现 O(n log n) 时间复杂度的排序。
3. **找到最大（小）元素**：能在 O(1) 时间内找到最大（或最小）元素。
4. **中位数和其他统计问题**：例如，找到数据流中的第 k 大元素。

### 树：

1. **数据库索引**：例如，B树和B+树在数据库中用于高效的数据检索。
2. **动态数据集查询**：二叉搜索树（尤其是自平衡版本，如 AVL 树或红黑树）可以用于高效地插入、删除和查找数据。
3. **图形学中的空间划分**：例如，四叉树或八叉树。
4. **文本编辑器**：例如，Rope 数据结构，用于实现高效的文本编辑。

根据应用的具体需求，你可以选择最适合的数据结构。堆通常更适用于需要快速查找最大（或最小）元素的场景，而树（尤其是自平衡树）更适用于需要高效进行各种动态操作的场景。