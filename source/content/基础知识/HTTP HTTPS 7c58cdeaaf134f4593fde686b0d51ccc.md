# HTTP/HTTPS

Owner: yancy yu

## HTTP1.1和HTTP1.0区别

1.http1.1增加了更多与缓存相关的字段

2.增加了几个状态码（414-url地址太长 410资源被永久删除）

3.支持长连接：1.1默认的是持久连接，支持同一个tcp请求中传送多个http请求和响应，1.0要支持需要设置keep-alive

## HTTP1.1和HTTP2.0区别

1.HTTP2.0采用二进制传输，效率更高，之前是字符串传输

2.**支持多路复用：一个http请求可以实现多个http请求传输，客户端和服务器可以通过流id来标识哪个请求**

3.头部压缩了

4.支持服务器推送

## HTTPS建立连接的过程

![Untitled](Untitled%207.jpeg)

① 证书验证阶段：

1）浏览器发起 HTTPS 请求；

2）服务端返回证书信息（包含公钥私钥）

3）客户端验证证书是否合法，如果不合法则提示告警。

- 如果有人篡改了，他没有CA机构的私钥，是无法得到加密后的签名的。客户端发现证书原文和签名解密后值不一致则说明被篡改了
- 如果有人把证书替换了：客户端可以校验证书里的域名是否和自己请求的域名一致

② 数据传输阶段：

1）当证书验证合法后，在本地生成随机数；

2）通过公钥加密随机数，并把加密后的随机数传输到服务端；

3）服务端通过私钥对随机数进行解密；

4）服务端通过客户端传入的随机数构造对称加密算法，对返回结果内容进行加密后传输。

## HTTP状态码

分类 分类描述

1XX 指示信息--表示请求正在处理

2XX 成功--表示请求已被成功处理完毕

3XX 重定向--要完成的请求需要进行附加操作

4XX 客户端错误--请求有语法错误或者请求无法实现，服务器无法处理请求

5XX 服务器端错误--服务器处理请求出现错误

相应的 HTTP 状态码列表：

状态码 英文名称 中文描述

100 Continue 继续。客户端继续处理请求

101 Switching Protocol 切换协议。服务器根据客户端的请求切换到更高级的协议

200 OK 请求成功。请求所希望的响应头或数据体将随此响应返回

201 Created 请求以实现。并且有一个新的资源已经依据需求而建立

202 Accepted 请求已接受。已经接受请求，但还未处理完成

203 Non-Authoritative Information 非授权信息。请求成功。但返回的 meta 信息不在原始的服务器中，而是一个副本。

204 No Content 无内容。服务器成功处理了请求，但不需要返回任何实体内容

205 Reset Content 重置内容。与 204 类似，不同点是返回此状态码的响应要求请求者重置文档视图

206 Partial Content 部分内容。服务器成功处理了部分 GET 请求

300 Multiple Choices 多种选择。被请求的资源有一系列可供选择的回馈信息，用户或浏览器能够自行选择一个首选地址进行重定向

301 Moved Permanently 永久移动。请求的资源已被永久地移动到新 URI，返回信息会包含新的 URI，浏览器会自动定向到新 URI

302 Found 临时移动。与 301 类似。但资源只是临时被移动，客户端应继续使用原有URI

303 See Other 查看其它地址。与301类似。使用GET和POST请求查看

304 Not Modified 未修改。如果客户端发送了一个带条件的 GET 请求且该请求已被允许，而文档的内容（自上次访问以来或者根据请求的条件）并没有改变，则服务器应当返回这个状态码

305 Use Proxy 使用代理。被请求的资源必须通过指定的代理才能被访问

306 Unused 在最新版的规范中，306状态码已经不再被使用

307 Temporary Redirect 临时重定向。请求的资源现在临时从不同的URI 响应请求，与302类似

400 Bad Request 客户端请求的语法错误，服务器无法理解；请求的参数有误

401 Unauthorized 当前请求需要用户验证

402 Payment Required 该状态码是为了将来可能的需求而预留的

403 Forbidden 服务器已经理解请求，但是拒绝执行它

404 Not Found 请求失败，请求所希望得到的资源未被在服务器上发现

405 Method Not Allowed 客户端请求中的方法被禁止

406 Not Acceptable 请求的资源的内容特性无法满足请求头中的条件，因而无法生成响应实体

407 Proxy Authentication Required 与401响应类似，只不过客户端必须在代理服务器上进行身份验证

408 Request Time-out 请求超时。服务器等待客户端发送的请求时间过长，超时

409 Conflict 由于和被请求的资源的当前状态之间存在冲突，请求无法完成

410 Gone 被请求的资源在服务器上已经不再可用，而且没有任何已知的转发地址

411 Length Required 服务器拒绝在没有定义 Content-Length 头的情况下接受请求

412 Precondition Failed 客户端请求信息的先决条件错误

413 Request Entity Too Large 服务器拒绝处理当前请求，因为该请求提交的实体数据大小超过了服务器愿意或者能够处理的范围

414 Request-URI Too Large 请求的 URI 长度超过了服务器能够解释的长度，因此服务器拒绝对该请求提供服务

415 Unsupported Media Type 服务器无法处理请求附带的媒体格式

416 Requested range not satisfiable 客户端请求的范围无效

417 Expectation Failed 服务器无法满足Expect的请求头信息

500 Internal Server 服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理

501 Not Implemented 服务器不支持当前请求所需要的某个功能

502 Bad Gateway 作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到无效的响应

503 Service Unavailable 由于临时的服务器维护或者过载，服务器当前无法处理请求，一段时间后可能恢复正常

504 Gateway Time-out 充当网关或代理的服务器，未及时从远端服务器获取请求

505 HTTP Version not supported 服务器不支持，或者拒绝支持在请求中使用的 HTTP 版本

**面试时针对状态码的常见问法：**

① 状态码 301 和 302 的区别？

301：永久移动。请求的资源已被永久的移动到新的URI，旧的地址已经被永久的删除了。返回信息会包括新的URI，浏览器会自动定向到新的URI。今后新的请求都应使用新的URI代替。

302：临时移动。与301类似，客户端拿到服务端的响应消息后会跳转到一个新的 URL 地址。但资源只是临时被移动，旧的地址还在，客户端应继续使用原有URI。

② HTTP 异常状态码知道哪些？

该问题一般只需要回答 3, 4 , 5 开头的一些常见异常状态码即可。