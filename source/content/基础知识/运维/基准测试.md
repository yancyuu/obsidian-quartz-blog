
## **基准测试：**

- 可能不关系业务逻辑，所用的查询和业务的真实性和业务环境没关系

### 准备工作

1. **确定目标**：明确你要测试什么。是系统的整体性能？还是某一个特定的接口？
2. **选择工具**：选择合适的基准测试工具。常用的有 Apache JMeter、wrk、ab（Apache Benchmark）等。
3. **测试环境**：尽量让测试环境与生产环境相同或相似。这包括硬件、网络条件、数据库等。

### 设定测试用例

1. **接口与路由**：列出需要测试的API或页面路由。
2. **并发用户**：设定模拟的并发用户数。
3. **请求参数**：如果有，准备好请求需要的参数。
4. **测试时长**：设定每轮测试的时间。

### 运行测试

1. **启动测试**：使用选定的基准测试工具运行测试。
2. **实时监控**：在测试过程中，实时观察系统的CPU、内存、网络带宽等使用情况。

### 分析结果

1. **性能指标**：查看测试结果，主要关注的性能指标通常包括QPS（每秒请求数）、响应时间、错误率等。
2. **瓶颈诊断**：确定性能瓶颈出现在哪里（例如，是CPU、是数据库还是网络）。
3. **日志分析**：分析应用和服务器的日志，查看是否有异常或错误。

### 调优与迭代

1. **调优**：根据测试结果和分析，进行相应的性能优化。
2. **再次测试**：优化后，再次进行基准测试以验证是否性能有所提升。
3. **文档记录**：将测试过程和结果做好记录，以便未来参考或复查。

基准测试是一个持续的过程，应该随着应用的迭代和更新而不断进行，以确保性能始终符合预期。

## **压力测试:**

- 需要针对于不同的主题，所使用的数据和查询也是真实用到的
    
    **目的**
    
    - 建立mysql服务器的性能基准线
    - 模拟当前系统更高的负载，找出系统的扩展瓶颈
    - 测试不同的硬件，软件和操作系统配置
    - 证明新的硬件设备是否配置错误
    
    **如何测试**
    
    对整个系统进行基准测试
    
    优点：
    
    - 能够测试整个系统性能，包括web服务器、缓存、数据库等
    - 能反映出系统各个组件接口间的性能问题
    
    缺点：
    
    - 耗时长，复杂

### 1. 定义目标和场景

- **目标**: 确定测试的目的，比如找出系统的性能瓶颈，或者测试系统在高负载情况下的稳定性。
- **场景**: 设计要模拟的用户行为和操作场景。比如，模拟多少并发用户登录系统、搜索、提交订单等。

### 2. 选择工具

选择适合的压力测试工具。常用的工具有：

- Apache JMeter
- locust
- ab（Apache Benchmark）
- wrk
- Gatling

### 3. 搭建测试环境

尽量使测试环境与生产环境保持一致，包括硬件、网络配置、数据库等。

### 4. 编写测试脚本

使用选定的测试工具编写测试脚本，模拟定义好的用户行为和场景。

### 5. 执行测试

- **渐进式压力**: 从较低的负载开始，逐渐增加并发用户数或请求率。
- **监控系统**: 在测试过程中，密切关注系统的CPU、内存、磁盘、网络等资源使用情况，以及应用的错误日志。

### 6. 分析结果

收集并分析测试数据，关注以下几个方面：

- **性能瓶颈**: 是否有资源（CPU、内存、数据库等）达到了瓶颈。
- **失败点**: 在什么负载下，系统开始出现错误或响应时间不可接受。
- **恢复能力**: 系统在压力减少后是否能自动恢复。

### 7. 优化和调整

根据测试结果，进行相应的优化和调整，然后再次进行压力测试。

### 8. 生成报告

生成压力测试报告，包括测试目标、测试环境、测试方案、测试结果和优化建议。

### 9. 持续改进

压力测试应当是一个持续的过程，随着系统的更新和优化，需要不断地重新进行压力测试。

请注意，压力测试通常会消耗大量的系统资源，可能会影响其他用户和系统功能，因此最好在非生产环境或者在低峰时段进行。

### **区别**

1. **目标不同**：基准测试主要是为了了解系统在正常或预期的负载下的表现，而压力测试是为了了解系统在极端负载下的表现。
2. **测试范围**：基准测试通常更聚焦，可能只针对单一的API、数据库查询等，而压力测试通常是全面的，可能会涉及整个系统或多个系统组件。
3. **参数设置**：在基准测试中，测试参数（如并发用户数、请求率等）通常是固定的；在压力测试中，这些参数会逐渐增加。
4. **持续时间**：压力测试通常需要更长的时间，因为需要观察系统在长时间高负载后的表现和恢复能力。
5. **后续行动**：基准测试通常用于性能优化，而压力测试则更多用于确定系统的承载上限和进行容量规划。